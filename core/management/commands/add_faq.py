from django.core.management.base import BaseCommand
from core.models import FAQ


class Command(BaseCommand):
    help = 'Добавляет новые FAQ на основе информации из SmartSecretary.md'

    def handle(self, *args, **options):
        self.stdout.write('Добавление новых FAQ...')

        # Новые FAQ на основе SmartSecretary.md
        new_faqs = [
            # Диагностика
            {
                'question': 'Что такое биорезонансная диагностика?',
                'answer': 'Биорезонансная диагностика — это метод неинвазивной диагностики, который считывает электромагнитные сигналы от клеток, органов и систем организма и сравнивает их с базой эталонных частот здорового человека. Без боли, без уколов, без облучения.',
                'category': 'services',
                'language': 'ru'
            },
            {
                'question': 'Безопасна ли диагностика для детей?',
                'answer': 'Да, биорезонансная диагностика абсолютно безопасна для детей любого возраста. Метод неинвазивный, не требует уколов или облучения.',
                'category': 'services',
                'language': 'ru'
            },
            {
                'question': 'Сколько времени занимает диагностика?',
                'answer': 'Полное сканирование организма занимает всего 5 минут. После этого врач объясняет результаты и дает рекомендации.',
                'category': 'services',
                'language': 'ru'
            },
            {
                'question': 'Что показывает диагностика?',
                'answer': 'Диагностика определяет: состояние внутренних органов (ЖКТ, сердце, легкие, печень, почки), нагрузки на организм (паразиты, бактерии, вирусы, грибки), аллергии, интоксикации, дефициты микроэлементов, эмоциональное и нервно-психическое состояние, энергетический баланс, уровень стресса, ресурсы иммунитета.',
                'category': 'services',
                'language': 'ru'
            },
            {
                'question': 'Нужна ли подготовка к диагностике?',
                'answer': 'Специальная подготовка не требуется. Просто приходите в удобное время.',
                'category': 'preparation',
                'language': 'ru'
            },
            
            # Массаж
            {
                'question': 'Предоставляете ли массаж на дому?',
                'answer': 'Услуги массажа на дому мы предоставляем только после того, как человек воспользовался массажем хотя бы один раз в нашем Центре. Цена устанавливается после посещения Центра.',
                'category': 'services',
                'language': 'ru'
            },
            {
                'question': 'Какой массаж подходит беременным?',
                'answer': 'Мы предоставляем специальный массаж для беременных от 5 месяцев. Длительность 30-40 минут, стоимость 180₪.',
                'category': 'services',
                'language': 'ru'
            },
            {
                'question': 'С какого возраста можно делать детский массаж?',
                'answer': 'Мы предоставляем массаж грудным детям (20-30 минут, 70₪) и детский массаж (40-50 минут, 150₪). Возраст уточняется индивидуально.',
                'category': 'services',
                'language': 'ru'
            },
            {
                'question': 'В чем разница между видами массажа?',
                'answer': 'Мы предоставляем различные виды массажа: классический шведский, акупрессура и точечный, спортивный, лечебный, баночный, комбинированный. Каждый вид подбирается индивидуально в зависимости от потребностей пациента.',
                'category': 'services',
                'language': 'ru'
            },
            
            # Цены и скидки
            {
                'question': 'Можно ли получить скидку?',
                'answer': 'Все вопросы о скидках решаются только после первой процедуры. Мы ценим качество и опыт наших врачей.',
                'category': 'prices',
                'language': 'ru'
            },
            {
                'question': 'Есть ли пакетные предложения?',
                'answer': 'Да, у нас есть VIP пакет диагностики, который включает выявление проблем, эпикриз, рекомендации, индивидуальный комплекс упражнений, массажи и иглотерапию, сопровождение по WhatsApp с 9:00 до 19:00 в рабочие дни на протяжении всего курса терапии. Стоимость 5500₪.',
                'category': 'prices',
                'language': 'ru'
            },
            {
                'question': 'Как оплачиваются услуги?',
                'answer': 'У нас гибкая система оплаты. Детали уточняются при записи на прием.',
                'category': 'prices',
                'language': 'ru'
            },
            
            # Специалисты
            {
                'question': 'Какой опыт у ваших врачей?',
                'answer': 'Екатерина - врач-реабилитолог с опытом работы с 2010 года (15+ лет). Римма - врач педиатр и нутрициолог, кандидат медицинских наук с опытом работы 40 лет. Авраам - опытный массажист.',
                'category': 'general',
                'language': 'ru'
            },
            {
                'question': 'Какие методы лечения применяются?',
                'answer': 'Мы применяем: остеопатию, мануальную терапию, лечебный массаж, аппаратную физиотерапию, кинезиотейпирование, акупунктуру, вакуумные банки, комплекс упражнений для реабилитации.',
                'category': 'services',
                'language': 'ru'
            },
            {
                'question': 'Работаете ли с детьми с особенностями развития?',
                'answer': 'Да, Екатерина специализируется на детской реабилитации, включая работу с детьми с РАС (расстройства аутистического спектра) и ДЦП.',
                'category': 'services',
                'language': 'ru'
            },
            
            # Общие вопросы
            {
                'question': 'Какие у вас рабочие часы?',
                'answer': 'Мы работаем с понедельника по воскресенье. Точное расписание уточняется при записи на прием.',
                'category': 'general',
                'language': 'ru'
            },
            {
                'question': 'Как записаться на прием?',
                'answer': 'Вы можете записаться через наш сайт, по телефону или через WhatsApp. Мы работаем на нескольких языках: русский, иврит, английский.',
                'category': 'general',
                'language': 'ru'
            }
        ]

        created_count = 0
        for faq_data in new_faqs:
            faq, created = FAQ.objects.get_or_create(
                question=faq_data['question'],
                defaults=faq_data
            )
            if created:
                self.stdout.write(f'Создан FAQ: {faq.question[:50]}...')
                created_count += 1
            else:
                self.stdout.write(f'FAQ уже существует: {faq.question[:50]}...')

        self.stdout.write(f'\nСоздано {created_count} новых FAQ')
        self.stdout.write(
            self.style.SUCCESS('✅ FAQ успешно добавлены!')
        )
